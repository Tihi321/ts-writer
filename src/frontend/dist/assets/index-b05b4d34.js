(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const nt={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Qe(this.context.count)},getNextContextId(){return Qe(this.context.count++)}};function Qe(e){const t=String(e),r=t.length-1;return nt.context.id+(r?String.fromCharCode(96+r):"")+t}const xt=!1,wt=(e,t)=>e===t,U=Symbol("solid-proxy"),$t=typeof Proxy=="function",Me=Symbol("solid-track"),ye={equals:wt};let ot=dt;const Y=1,ve=2,st={owned:null,cleanups:null,context:null,owner:null};var S=null;let Te=null,St=null,O=null,L=null,J=null,Ae=0;function de(e,t){const r=O,n=S,o=e.length===0,s=t===void 0?n:t,a=o?st:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=o?e:()=>e(()=>E(()=>ue(a)));S=a,O=null;try{return ee(l,!0)}finally{O=r,S=n}}function R(e,t){t=t?Object.assign({},ye,t):ye;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(r.value)),ct(r,o));return[it.bind(r),n]}function V(e,t,r){const n=Ke(e,t,!1,Y);pe(n)}function F(e,t,r){ot=kt;const n=Ke(e,t,!1,Y);(!r||!r.render)&&(n.user=!0),J?J.push(n):pe(n)}function G(e,t,r){r=r?Object.assign({},ye,r):ye;const n=Ke(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,pe(n),it.bind(n)}function q(e){return ee(e,!1)}function E(e){if(O===null)return e();const t=O;O=null;try{return e()}finally{O=t}}function he(e){F(()=>E(e))}function X(e){return S===null||(S.cleanups===null?S.cleanups=[e]:S.cleanups.push(e)),e}function Fe(){return O}function Ct(){return S}function At(e,t){const r=S,n=O;S=e,O=null;try{return ee(t,!0)}catch(o){Ue(o)}finally{S=r,O=n}}function lt(e,t){const r=Symbol("context");return{id:r,Provider:Pt(r),defaultValue:e}}function at(e){let t;return S&&S.context&&(t=S.context[e.id])!==void 0?t:e.defaultValue}function It(e){const t=G(e),r=G(()=>Re(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function it(){if(this.sources&&this.state)if(this.state===Y)pe(this);else{const e=L;L=null,ee(()=>xe(this),!1),L=e}if(O){const e=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(e)):(O.sources=[this],O.sourceSlots=[e]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function ct(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&ee(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],a=Te&&Te.running;a&&Te.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?L.push(s):J.push(s),s.observers&&ut(s)),a||(s.state=Y)}if(L.length>1e6)throw L=[],new Error},!1)),t}function pe(e){if(!e.fn)return;ue(e);const t=Ae;Ot(e,e.value,t)}function Ot(e,t,r){let n;const o=S,s=O;O=S=e;try{n=e.fn(t)}catch(a){return e.pure&&(e.state=Y,e.owned&&e.owned.forEach(ue),e.owned=null),e.updatedAt=r+1,Ue(a)}finally{O=s,S=o}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?ct(e,n):e.value=n,e.updatedAt=r)}function Ke(e,t,r,n=Y,o){const s={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:S,context:S?S.context:null,pure:r};return S===null||S!==st&&(S.owned?S.owned.push(s):S.owned=[s]),s}function me(e){if(e.state===0)return;if(e.state===ve)return xe(e);if(e.suspense&&E(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ae);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===Y)pe(e);else if(e.state===ve){const n=L;L=null,ee(()=>xe(e,t[0]),!1),L=n}}function ee(e,t){if(L)return e();let r=!1;t||(L=[]),J?r=!0:J=[],Ae++;try{const n=e();return _t(r),n}catch(n){r||(J=null),L=null,Ue(n)}}function _t(e){if(L&&(dt(L),L=null),e)return;const t=J;J=null,t.length&&ee(()=>ot(t),!1)}function dt(e){for(let t=0;t<e.length;t++)me(e[t])}function kt(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:me(n)}for(t=0;t<r;t++)me(e[t])}function xe(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const o=n.state;o===Y?n!==t&&(!n.updatedAt||n.updatedAt<Ae)&&me(n):o===ve&&xe(n,t)}}}function ut(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=ve,r.pure?L.push(r):J.push(r),r.observers&&ut(r))}}function ue(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const s=o.pop(),a=r.observerSlots.pop();n<o.length&&(s.sourceSlots[a]=n,o[n]=s,r.observerSlots[n]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ue(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ue(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Et(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ue(e,t=S){throw Et(e)}function Re(e){if(typeof e=="function"&&!e.length)return Re(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Re(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Pt(e,t){return function(n){let o;return V(()=>o=E(()=>(S.context={...S.context,[e]:n.value},It(()=>n.children))),void 0),o}}const Tt=Symbol("fallback");function Ze(e){for(let t=0;t<e.length;t++)e[t]()}function Dt(e,t,r={}){let n=[],o=[],s=[],a=0,l=t.length>1?[]:null;return X(()=>Ze(s)),()=>{let i=e()||[],d=i.length,f,c;return i[Me],E(()=>{let h,g,y,v,C,A,I,w,j;if(d===0)a!==0&&(Ze(s),s=[],n=[],o=[],a=0,l&&(l=[])),r.fallback&&(n=[Tt],o[0]=de(te=>(s[0]=te,r.fallback())),a=1);else if(a===0){for(o=new Array(d),c=0;c<d;c++)n[c]=i[c],o[c]=de(p);a=d}else{for(y=new Array(d),v=new Array(d),l&&(C=new Array(d)),A=0,I=Math.min(a,d);A<I&&n[A]===i[A];A++);for(I=a-1,w=d-1;I>=A&&w>=A&&n[I]===i[w];I--,w--)y[w]=o[I],v[w]=s[I],l&&(C[w]=l[I]);for(h=new Map,g=new Array(w+1),c=w;c>=A;c--)j=i[c],f=h.get(j),g[c]=f===void 0?-1:f,h.set(j,c);for(f=A;f<=I;f++)j=n[f],c=h.get(j),c!==void 0&&c!==-1?(y[c]=o[f],v[c]=s[f],l&&(C[c]=l[f]),c=g[c],h.set(j,c)):s[f]();for(c=A;c<d;c++)c in y?(o[c]=y[c],s[c]=v[c],l&&(l[c]=C[c],l[c](c))):o[c]=de(p);o=o.slice(0,a=d),n=i.slice(0)}return o});function p(h){if(s[c]=h,l){const[g,y]=R(c);return l[c]=y,t(i[c],g)}return t(i[c])}}}function T(e,t){return E(()=>e(t||{}))}function be(){return!0}const jt={get(e,t,r){return t===U?r:e.get(t)},has(e,t){return t===U?!0:e.has(t)},set:be,deleteProperty:be,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:be,deleteProperty:be}},ownKeys(e){return e.keys()}};function De(e){return(e=typeof e=="function"?e():e)?e:{}}function Nt(){for(let e=0,t=this.length;e<t;++e){const r=this[e]();if(r!==void 0)return r}}function Lt(...e){let t=!1;for(let a=0;a<e.length;a++){const l=e[a];t=t||!!l&&U in l,e[a]=typeof l=="function"?(t=!0,G(l)):l}if($t&&t)return new Proxy({get(a){for(let l=e.length-1;l>=0;l--){const i=De(e[l])[a];if(i!==void 0)return i}},has(a){for(let l=e.length-1;l>=0;l--)if(a in De(e[l]))return!0;return!1},keys(){const a=[];for(let l=0;l<e.length;l++)a.push(...Object.keys(De(e[l])));return[...new Set(a)]}},jt);const r={},n=Object.create(null);for(let a=e.length-1;a>=0;a--){const l=e[a];if(!l)continue;const i=Object.getOwnPropertyNames(l);for(let d=i.length-1;d>=0;d--){const f=i[d];if(f==="__proto__"||f==="constructor")continue;const c=Object.getOwnPropertyDescriptor(l,f);if(!n[f])n[f]=c.get?{enumerable:!0,configurable:!0,get:Nt.bind(r[f]=[c.get.bind(l)])}:c.value!==void 0?c:void 0;else{const p=r[f];p&&(c.get?p.push(c.get.bind(l)):c.value!==void 0&&p.push(()=>c.value))}}}const o={},s=Object.keys(n);for(let a=s.length-1;a>=0;a--){const l=s[a],i=n[l];i&&i.get?Object.defineProperty(o,l,i):o[l]=i?i.value:void 0}return o}const Mt=e=>`Stale read from <${e}>.`;function ft(e){const t="fallback"in e&&{fallback:()=>e.fallback};return G(Dt(()=>e.each,e.children,t||void 0))}function Z(e){const t=e.keyed,r=G(()=>e.when,void 0,void 0),n=t?r:G(r,void 0,{equals:(o,s)=>!o==!s});return G(()=>{const o=n();if(o){const s=e.children;return typeof s=="function"&&s.length>0?E(()=>s(t?o:()=>{if(!E(n))throw Mt("Show");return r()})):s}return e.fallback},void 0,void 0)}const Ft=e=>G(()=>e());function Rt(e,t,r){let n=r.length,o=t.length,s=n,a=0,l=0,i=t[o-1].nextSibling,d=null;for(;a<o||l<s;){if(t[a]===r[l]){a++,l++;continue}for(;t[o-1]===r[s-1];)o--,s--;if(o===a){const f=s<n?l?r[l-1].nextSibling:r[s-l]:i;for(;l<s;)e.insertBefore(r[l++],f)}else if(s===l)for(;a<o;)(!d||!d.has(t[a]))&&t[a].remove(),a++;else if(t[a]===r[s-1]&&r[l]===t[o-1]){const f=t[--o].nextSibling;e.insertBefore(r[l++],t[a++].nextSibling),e.insertBefore(r[--s],f),t[o]=r[s]}else{if(!d){d=new Map;let c=l;for(;c<s;)d.set(r[c],c++)}const f=d.get(t[a]);if(f!=null)if(l<f&&f<s){let c=a,p=1,h;for(;++c<o&&c<s&&!((h=d.get(t[c]))==null||h!==f+p);)p++;if(p>f-l){const g=t[a];for(;l<f;)e.insertBefore(r[l++],g)}else e.replaceChild(r[l++],t[a++])}else a++;else t[a++].remove()}}}const ze="_$DX_DELEGATE";function Wt(e,t,r,n={}){let o;return de(s=>{o=s,t===document?e():_(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{o(),t.textContent=""}}function D(e,t,r,n){let o;const s=()=>{const l=n?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return l.innerHTML=e,r?l.content.firstChild.firstChild:n?l.firstChild:l.content.firstChild},a=t?()=>E(()=>document.importNode(o||(o=s()),!0)):()=>(o||(o=s())).cloneNode(!0);return a.cloneNode=a,a}function Ve(e,t=window.document){const r=t[ze]||(t[ze]=new Set);for(let n=0,o=e.length;n<o;n++){const s=e[n];r.has(s)||(r.add(s),t.addEventListener(s,qt))}}function Bt(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Kt(e,t){t==null?e.removeAttribute("class"):e.className=t}function Ut(e,t,r={}){const n=Object.keys(t||{}),o=Object.keys(r);let s,a;for(s=0,a=o.length;s<a;s++){const l=o[s];!l||l==="undefined"||t[l]||(et(e,l,!1),delete r[l])}for(s=0,a=n.length;s<a;s++){const l=n[s],i=!!t[l];!l||l==="undefined"||r[l]===i||!i||(et(e,l,!0),r[l]=i)}return r}function Vt(e,t,r){if(!t)return r?Bt(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let o,s;for(s in r)t[s]==null&&n.removeProperty(s),delete r[s];for(s in t)o=t[s],o!==r[s]&&(n.setProperty(s,o),r[s]=o);return r}function qe(e,t,r){return E(()=>e(t,r))}function _(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return we(e,t,n,r);V(o=>we(e,t(),o,r),n)}function et(e,t,r){const n=t.trim().split(/\s+/);for(let o=0,s=n.length;o<s;o++)e.classList.toggle(n[o],r)}function qt(e){let t=e.target;const r=`$$${e.type}`,n=e.target,o=e.currentTarget,s=i=>Object.defineProperty(e,"target",{configurable:!0,value:i}),a=()=>{const i=t[r];if(i&&!t.disabled){const d=t[`${r}Data`];if(d!==void 0?i.call(t,d,e):i.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},l=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const i=e.composedPath();s(i[0]);for(let d=0;d<i.length-2&&(t=i[d],!!a());d++){if(t._$host){t=t._$host,l();break}if(t.parentNode===o)break}}else l();s(n)}function we(e,t,r,n,o){for(;typeof r=="function";)r=r();if(t===r)return r;const s=typeof t,a=n!==void 0;if(e=a&&r[0]&&r[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===r))return r;if(a){let l=r[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),r=ne(e,r,n,l)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||s==="boolean")r=ne(e,r,n);else{if(s==="function")return V(()=>{let l=t();for(;typeof l=="function";)l=l();r=we(e,l,r,n)}),()=>r;if(Array.isArray(t)){const l=[],i=r&&Array.isArray(r);if(We(l,t,r,o))return V(()=>r=we(e,l,r,n,!0)),()=>r;if(l.length===0){if(r=ne(e,r,n),a)return r}else i?r.length===0?tt(e,l,n):Rt(e,r,l):(r&&ne(e),tt(e,l));r=l}else if(t.nodeType){if(Array.isArray(r)){if(a)return r=ne(e,r,n,t);ne(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function We(e,t,r,n){let o=!1;for(let s=0,a=t.length;s<a;s++){let l=t[s],i=r&&r[e.length],d;if(!(l==null||l===!0||l===!1))if((d=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=We(e,l,i)||o;else if(d==="function")if(n){for(;typeof l=="function";)l=l();o=We(e,Array.isArray(l)?l:[l],Array.isArray(i)?i:[i])||o}else e.push(l),o=!0;else{const f=String(l);i&&i.nodeType===3&&i.data===f?e.push(i):e.push(document.createTextNode(f))}}return o}function tt(e,t,r=null){for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[n],r)}function ne(e,t,r,n){if(r===void 0)return e.textContent="";const o=n||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const l=t[a];if(o!==l){const i=l.parentNode===e;!s&&!a?i?e.replaceChild(o,l):e.insertBefore(o,r):i&&l.remove()}else s=!0}}else e.insertBefore(o,r);return[o]}const Ht="http://www.w3.org/2000/svg";function Jt(e,t=!1){return t?document.createElementNS(Ht,e):document.createElement(e)}function Gt(e){const{useShadow:t}=e,r=document.createTextNode(""),n=()=>e.mount||document.body,o=Ct();let s,a=!!nt.context;return F(()=>{s||(s=At(o,()=>G(()=>e.children)));const l=n();if(l instanceof HTMLHeadElement){const[i,d]=R(!1),f=()=>d(!0);de(c=>_(l,()=>i()?c():s(),null)),X(f)}else{const i=Jt(e.isSVG?"g":"div",e.isSVG),d=t&&i.attachShadow?i.attachShadow({mode:"open"}):i;Object.defineProperty(i,"_$host",{get(){return r.parentNode},configurable:!0}),_(d,s),l.appendChild(i),e.ref&&e.ref(i),X(()=>l.removeChild(i))}},void 0,{render:!a}),r}const Be=Symbol("store-raw"),se=Symbol("store-node"),H=Symbol("store-has"),gt=Symbol("store-self");function ht(e){let t=e[U];if(!t&&(Object.defineProperty(e,U,{value:t=new Proxy(e,Qt)}),!Array.isArray(e))){const r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let o=0,s=r.length;o<s;o++){const a=r[o];n[a].get&&Object.defineProperty(e,a,{enumerable:n[a].enumerable,get:n[a].get.bind(t)})}}return t}function $e(e){let t;return e!=null&&typeof e=="object"&&(e[U]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function fe(e,t=new Set){let r,n,o,s;if(r=e!=null&&e[Be])return r;if(!$e(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,l=e.length;a<l;a++)o=e[a],(n=fe(o,t))!==o&&(e[a]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let i=0,d=a.length;i<d;i++)s=a[i],!l[s].get&&(o=e[s],(n=fe(o,t))!==o&&(e[s]=n))}return e}function Se(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function ge(e,t,r){if(e[t])return e[t];const[n,o]=R(r,{equals:!1,internal:!0});return n.$=o,e[t]=n}function Xt(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===U||t===se||(delete r.value,delete r.writable,r.get=()=>e[U][t]),r}function pt(e){Fe()&&ge(Se(e,se),gt)()}function Yt(e){return pt(e),Reflect.ownKeys(e)}const Qt={get(e,t,r){if(t===Be)return e;if(t===U)return r;if(t===Me)return pt(e),r;const n=Se(e,se),o=n[t];let s=o?o():e[t];if(t===se||t===H||t==="__proto__")return s;if(!o){const a=Object.getOwnPropertyDescriptor(e,t);Fe()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=ge(n,t,s)())}return $e(s)?ht(s):s},has(e,t){return t===Be||t===U||t===Me||t===se||t===H||t==="__proto__"?!0:(Fe()&&ge(Se(e,H),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Yt,getOwnPropertyDescriptor:Xt};function Ce(e,t,r,n=!1){if(!n&&e[t]===r)return;const o=e[t],s=e.length;r===void 0?(delete e[t],e[H]&&e[H][t]&&o!==void 0&&e[H][t].$()):(e[t]=r,e[H]&&e[H][t]&&o===void 0&&e[H][t].$());let a=Se(e,se),l;if((l=ge(a,t,o))&&l.$(()=>r),Array.isArray(e)&&e.length!==s){for(let i=e.length;i<s;i++)(l=a[i])&&l.$();(l=ge(a,"length",s))&&l.$(e.length)}(l=a[gt])&&l.$()}function bt(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const o=r[n];Ce(e,o,t[o])}}function Zt(e,t){if(typeof t=="function"&&(t=t(e)),t=fe(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const o=t[r];e[r]!==o&&Ce(e,r,o)}Ce(e,"length",n)}else bt(e,t)}function ie(e,t,r=[]){let n,o=e;if(t.length>1){n=t.shift();const a=typeof n,l=Array.isArray(e);if(Array.isArray(n)){for(let i=0;i<n.length;i++)ie(e,[n[i]].concat(t),r);return}else if(l&&a==="function"){for(let i=0;i<e.length;i++)n(e[i],i)&&ie(e,[i].concat(t),r);return}else if(l&&a==="object"){const{from:i=0,to:d=e.length-1,by:f=1}=n;for(let c=i;c<=d;c+=f)ie(e,[c].concat(t),r);return}else if(t.length>1){ie(e[n],t,[n].concat(r));return}o=e[n],r=[n].concat(r)}let s=t[0];typeof s=="function"&&(s=s(o,r),s===o)||n===void 0&&s==null||(s=fe(s),n===void 0||$e(o)&&$e(s)&&!Array.isArray(s)?bt(o,s):Ce(e,n,s))}function Ie(...[e,t]){const r=fe(e||{}),n=Array.isArray(r),o=ht(r);function s(...a){q(()=>{n&&a.length===1?Zt(r,a[0]):ie(r,a)})}return[o,s]}var zt=D("<div>"),Oe=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},le=e=>{let t=new Oe(e.getBoundingClientRect());const{transform:r}=getComputedStyle(e);return r&&(t=er(t,r)),t},er=(e,t)=>{let r,n;if(t.startsWith("matrix3d(")){const o=t.slice(9,-1).split(/, /);r=+o[12],n=+o[13]}else if(t.startsWith("matrix(")){const o=t.slice(7,-1).split(/, /);r=+o[4],n=+o[5]}else r=0,n=0;return new Oe({...e,x:e.x-r,y:e.y-n})},K=()=>({x:0,y:0}),He=(e,t)=>e.x===t.x&&e.y===t.y,je=(e,t)=>new Oe({...e,x:e.x+t.x,y:e.y+t.y}),tr=(e,t)=>{const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),o=Math.min(e.right,t.right),s=Math.min(e.bottom,t.bottom),a=o-n,l=s-r;if(n<o&&r<s){const i=e.width*e.height,d=t.width*t.height,f=a*l;return f/(i+d-f)}return 0},Ne=(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,rr=(e,t,r)=>{const n=e.transformed,o={ratio:0,droppable:null};for(const s of t){const a=tr(n,s.layout);a>o.ratio?(o.ratio=a,o.droppable=s):a>0&&a===o.ratio&&s.id===r.activeDroppableId&&(o.droppable=s)}return o.droppable},yt=lt(),nr=e=>{const t=Lt({collisionDetector:rr},e),[r,n]=Ie({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return r.active.draggableId!==null?r.draggables[r.active.draggableId]:null},droppableId:null,get droppable(){return r.active.droppableId!==null?r.droppables[r.active.droppableId]:null},sensorId:null,get sensor(){return r.active.sensorId!==null?r.sensors[r.active.sensorId]:null},overlay:null}}),o=(u,b,m)=>{u.substring(0,u.length-1),E(()=>r[u][b])&&n(u,b,"transformers",m.id,m)},s=(u,b,m)=>{u.substring(0,u.length-1),E(()=>r[u][b])&&E(()=>r[u][b].transformers[m])&&n(u,b,"transformers",m,void 0)},a=({id:u,node:b,layout:m,data:M})=>{const $=r.draggables[u],x={id:u,node:b,layout:m,data:M,_pendingCleanup:!1};let k;if(!$)Object.defineProperties(x,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(r.active.overlay)return K();const N=Object.values(r.draggables[u].transformers);return N.sort((W,re)=>W.order-re.order),N.reduce((W,re)=>re.callback(W),K())}},transformed:{enumerable:!0,configurable:!0,get:()=>je(r.draggables[u].layout,r.draggables[u].transform)}});else if(r.active.draggableId===u&&!r.active.overlay){const N={x:$.layout.x-m.x,y:$.layout.y-m.y},W="addDraggable-existing-offset",re=$.transformers[W],Xe=re?re.callback(N):N;k={id:W,order:100,callback:Ye=>({x:Ye.x+Xe.x,y:Ye.y+Xe.y})},Pe(()=>s("draggables",u,W))}q(()=>{n("draggables",u,x),k&&o("draggables",u,k)}),r.active.draggable&&w()},l=u=>{E(()=>r.draggables[u])&&(n("draggables",u,"_pendingCleanup",!0),queueMicrotask(()=>i(u)))},i=u=>{if(r.draggables[u]?._pendingCleanup){const b=r.active.draggableId===u;q(()=>{b&&n("active","draggableId",null),n("draggables",u,void 0)})}},d=({id:u,node:b,layout:m,data:M})=>{const $=r.droppables[u],x={id:u,node:b,layout:m,data:M,_pendingCleanup:!1};$||Object.defineProperties(x,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const k=Object.values(r.droppables[u].transformers);return k.sort((N,W)=>N.order-W.order),k.reduce((N,W)=>W.callback(N),K())}},transformed:{enumerable:!0,configurable:!0,get:()=>je(r.droppables[u].layout,r.droppables[u].transform)}}),n("droppables",u,x),r.active.draggable&&w()},f=u=>{E(()=>r.droppables[u])&&(n("droppables",u,"_pendingCleanup",!0),queueMicrotask(()=>c(u)))},c=u=>{if(r.droppables[u]?._pendingCleanup){const b=r.active.droppableId===u;q(()=>{b&&n("active","droppableId",null),n("droppables",u,void 0)})}},p=({id:u,activators:b})=>{n("sensors",u,{id:u,activators:b,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:r.sensors[u].coordinates.current.x-r.sensors[u].coordinates.origin.x,y:r.sensors[u].coordinates.current.y-r.sensors[u].coordinates.origin.y}}}})},h=u=>{if(!E(()=>r.sensors[u]))return;const b=r.active.sensorId===u;q(()=>{b&&n("active","sensorId",null),n("sensors",u,void 0)})},g=({node:u,layout:b})=>{const m=r.active.overlay,M={node:u,layout:b};m||Object.defineProperties(M,{id:{enumerable:!0,configurable:!0,get:()=>r.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>r.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(r.active.draggable?r.active.draggable.transformers:{}).filter(([$])=>$!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const $=Object.values(r.active.overlay?r.active.overlay.transformers:[]);return $.sort((x,k)=>x.order-k.order),$.reduce((x,k)=>k.callback(x),K())}},transformed:{enumerable:!0,configurable:!0,get:()=>r.active.overlay?je(r.active.overlay.layout,r.active.overlay.transform):new Oe({x:0,y:0,width:0,height:0})}}),n("active","overlay",M)},y=()=>n("active","overlay",null),v=(u,b)=>{q(()=>{n("sensors",u,"coordinates",{origin:{...b},current:{...b}}),n("active","sensorId",u)})},C=u=>{const b=r.active.sensorId;b&&n("sensors",b,"coordinates","current",{...u})},A=()=>n("active","sensorId",null),I=(u,b)=>{const m={};for(const $ of Object.values(r.sensors))if($)for(const[x,k]of Object.entries($.activators))m[x]??=[],m[x].push({sensor:$,activator:k});const M={};for(const $ in m){let x=$;b&&(x=`on${$}`),M[x]=k=>{for(const{activator:N}of m[$]){if(r.active.sensor)break;N(k,u)}}}return M},w=()=>{let u=!1;const b=Object.values(r.draggables),m=Object.values(r.droppables),M=r.active.overlay;return q(()=>{const $=new WeakMap;for(const x of b)if(x){const k=x.layout;$.has(x.node)||$.set(x.node,le(x.node));const N=$.get(x.node);Ne(k,N)||(n("draggables",x.id,"layout",N),u=!0)}for(const x of m)if(x){const k=x.layout;$.has(x.node)||$.set(x.node,le(x.node));const N=$.get(x.node);Ne(k,N)||(n("droppables",x.id,"layout",N),u=!0)}if(M){const x=M.layout,k=le(M.node);Ne(x,k)||(n("active","overlay","layout",k),u=!0)}}),u},j=()=>{const u=r.active.overlay??r.active.draggable;if(u){const b=t.collisionDetector(u,Object.values(r.droppables),{activeDroppableId:r.active.droppableId}),m=b?b.id:null;r.active.droppableId!==m&&n("active","droppableId",m)}},te=u=>{const b={id:"sensorMove",order:0,callback:m=>r.active.sensor?{x:m.x+r.active.sensor.coordinates.delta.x,y:m.y+r.active.sensor.coordinates.delta.y}:m};w(),q(()=>{n("active","draggableId",u),o("draggables",u,b)}),j()},ke=()=>{const u=E(()=>r.active.draggableId);q(()=>{u!==null&&s("draggables",u,"sensorMove"),n("active",["draggableId","droppableId"],null)}),w()},Je=u=>{F(()=>{const b=r.active.draggable;b&&E(()=>u({draggable:b}))})},Ee=u=>{F(()=>{const b=r.active.draggable;if(b){const m=E(()=>r.active.overlay);Object.values(m?m.transform:b.transform),E(()=>u({draggable:b,overlay:m}))}})},Ge=u=>{F(()=>{const b=r.active.draggable,m=r.active.droppable;b&&E(()=>u({draggable:b,droppable:m,overlay:r.active.overlay}))})},Pe=u=>{F(({previousDraggable:b,previousDroppable:m,previousOverlay:M})=>{const $=r.active.draggable,x=$?r.active.droppable:null,k=$?r.active.overlay:null;return!$&&b&&E(()=>u({draggable:b,droppable:m,overlay:M})),{previousDraggable:$,previousDroppable:x,previousOverlay:k}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};Ee(()=>j()),t.onDragStart&&Je(t.onDragStart),t.onDragMove&&Ee(t.onDragMove),t.onDragOver&&Ge(t.onDragOver),t.onDragEnd&&Pe(t.onDragEnd);const mt=[r,{addTransformer:o,removeTransformer:s,addDraggable:a,removeDraggable:l,addDroppable:d,removeDroppable:f,addSensor:p,removeSensor:h,setOverlay:g,clearOverlay:y,recomputeLayouts:w,detectCollisions:j,draggableActivators:I,sensorStart:v,sensorMove:C,sensorEnd:A,dragStart:te,dragEnd:ke,onDragStart:Je,onDragMove:Ee,onDragOver:Ge,onDragEnd:Pe}];return T(yt.Provider,{value:mt,get children(){return t.children}})},z=()=>at(yt)||null,_e=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),or=(e,t={})=>{const[r,{addDraggable:n,removeDraggable:o,draggableActivators:s}]=z(),[a,l]=R(null);he(()=>{const c=a();c&&n({id:e,node:c,layout:le(c),data:t})}),X(()=>o(e));const i=()=>r.active.draggableId===e,d=()=>r.draggables[e]?.transform||K();return Object.defineProperties((c,p)=>{const h=p?p():{};F(()=>{const g=a(),y=s(e);if(g)for(const v in y)g.addEventListener(v,y[v]);X(()=>{if(g)for(const v in y)g.removeEventListener(v,y[v])})}),l(c),h.skipTransform||F(()=>{const g=d();if(He(g,K()))c.style.removeProperty("transform");else{const y=_e(d());c.style.setProperty("transform",y.transform??null)}})},{ref:{enumerable:!0,value:l},isActiveDraggable:{enumerable:!0,get:i},dragActivators:{enumerable:!0,get:()=>s(e,!0)},transform:{enumerable:!0,get:d}})},sr=(e,t={})=>{const[r,{addDroppable:n,removeDroppable:o}]=z(),[s,a]=R(null);he(()=>{const f=s();f&&n({id:e,node:f,layout:le(f),data:t})}),X(()=>o(e));const l=()=>r.active.droppableId===e,i=()=>r.droppables[e]?.transform||K();return Object.defineProperties((f,c)=>{const p=c?c():{};a(f),p.skipTransform||F(()=>{const h=i();if(He(h,K()))f.style.removeProperty("transform");else{const g=_e(i());f.style.setProperty("transform",g.transform??null)}})},{ref:{enumerable:!0,value:a},isActiveDroppable:{enumerable:!0,get:l},transform:{enumerable:!0,get:i}})},lr=e=>{const[t,{onDragStart:r,onDragEnd:n,setOverlay:o,clearOverlay:s}]=z();let a;r(({draggable:i})=>{o({node:i.node,layout:i.layout}),queueMicrotask(()=>{if(a){const d=le(a),f={x:(i.layout.width-d.width)/2,y:(i.layout.height-d.height)/2};d.x+=f.x,d.y+=f.y,o({node:a,layout:d})}})}),n(()=>queueMicrotask(s));const l=()=>{const i=t.active.overlay,d=t.active.draggable;return!i||!d?{}:{position:"fixed",transition:"transform 0s",top:`${i.layout.top}px`,left:`${i.layout.left}px`,"min-width":`${d.layout.width}px`,"min-height":`${d.layout.height}px`,..._e(i.transform),...e.style}};return T(Gt,{get mount(){return document.body},get children(){return T(Z,{get when(){return t.active.draggable},get children(){var i=zt(),d=a;return typeof d=="function"?qe(d,i):a=i,_(i,(()=>{var f=Ft(()=>typeof e.children=="function");return()=>f()?e.children(t.active.draggable):e.children})()),V(f=>{var c=e.class,p=l();return c!==f.e&&Kt(i,f.e=c),f.t=Vt(i,p,f.t),f},{e:void 0,t:void 0}),i}})}})},ar=(e,t,r)=>{const n=e.slice();return n.splice(r,0,...n.splice(t,1)),n},vt=lt(),ir=e=>{const[t]=z(),[r,n]=Ie({initialIds:[],sortedIds:[]}),o=l=>l>=0&&l<r.initialIds.length;F(()=>{n("initialIds",[...e.ids]),n("sortedIds",[...e.ids])}),F(()=>{t.active.draggableId&&t.active.droppableId?E(()=>{const l=r.sortedIds.indexOf(t.active.draggableId),i=r.initialIds.indexOf(t.active.droppableId);if(!o(l)||!o(i))n("sortedIds",[...e.ids]);else if(l!==i){const d=ar(r.sortedIds,l,i);n("sortedIds",d)}}):n("sortedIds",[...e.ids])});const a=[r,{}];return T(vt.Provider,{value:a,get children(){return e.children}})},cr=()=>at(vt)||null,dr=(e,t)=>r=>{e(r),t(r)},ur=(e,t={})=>{const[r,{addTransformer:n,removeTransformer:o}]=z(),[s]=cr(),a=or(e,t),l=sr(e,t),i=dr(a.ref,l.ref),d=()=>s.initialIds.indexOf(e),f=()=>s.sortedIds.indexOf(e),c=v=>r.droppables[v]?.layout||null,p=()=>{const v=K(),C=d(),A=f();if(A!==C){const I=c(e),w=c(s.initialIds[A]);I&&w&&(v.x=w.x-I.x,v.y=w.y-I.y)}return v},h={id:"sortableOffset",order:100,callback:v=>{const C=p();return{x:v.x+C.x,y:v.y+C.y}}};he(()=>n("droppables",e,h)),X(()=>o("droppables",e,h.id));const g=()=>(e===r.active.draggableId&&!r.active.overlay?r.draggables[e]?.transform:r.droppables[e]?.transform)||K();return Object.defineProperties(v=>{a(v,()=>({skipTransform:!0})),l(v,()=>({skipTransform:!0})),F(()=>{const C=g();if(He(C,K()))v.style.removeProperty("transform");else{const A=_e(g());v.style.setProperty("transform",A.transform??null)}})},{ref:{enumerable:!0,value:i},transform:{enumerable:!0,get:g},isActiveDraggable:{enumerable:!0,get:()=>a.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>a.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>l.isActiveDroppable}})},fr=D('<div class="flex h-screen bg-gray-100"><aside class="w-1/4 bg-gray-50 p-4 border-r border-gray-300 overflow-y-auto"></aside><main class="flex-1 p-4 flex flex-col overflow-y-auto"></main><aside class="w-1/4 bg-gray-50 p-4 border-l border-gray-300 overflow-y-auto">');const gr=e=>(()=>{var t=fr(),r=t.firstChild,n=r.nextSibling,o=n.nextSibling;return _(r,()=>e.chaptersPanel),_(n,()=>e.editorPanel),_(o,()=>e.ideasPanel),t})(),[P,B]=Ie({chapters:[],selectedChapterId:null,selectedChapterContent:null,isLoading:!1,error:null}),oe="/api",ce={async getAllChapters(){try{const e=await fetch(`${oe}/chapters`);if(!e.ok)throw new Error(`Failed to fetch chapters: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error fetching all chapters:",e),e}},async getChapterById(e){try{const t=await fetch(`${oe}/chapters/${e}`);if(!t.ok)throw new Error(`Failed to fetch chapter ${e}: ${t.statusText}`);return await t.json()}catch(t){throw console.error(`Error fetching chapter ${e}:`,t),t}},async createChapter(e){try{const t=await fetch(`${oe}/chapters`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})});if(!t.ok)throw new Error(`Failed to create chapter: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error creating chapter:",t),t}},async updateChapter(e,t){try{const r=await fetch(`${oe}/chapters/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Failed to update chapter ${e}: ${r.statusText}`);return await r.json()}catch(r){throw console.error(`Error updating chapter ${e}:`,r),r}},async deleteChapter(e){try{const t=await fetch(`${oe}/chapters/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete chapter ${e}: ${t.statusText}`);return await t.json()}catch(t){throw console.error(`Error deleting chapter ${e}:`,t),t}},async reorderChapters(e){try{const t=await fetch(`${oe}/chapters/reorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chapterOrder:e})});if(!t.ok)throw new Error(`Failed to reorder chapters: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error reordering chapters:",t),t}}};var hr=D('<div class="p-2 rounded cursor-pointer transition-colors select-none">'),pr=D("<p class=text-gray-500>Loading chapters..."),br=D("<p class=text-red-500>"),yr=D("<div class=space-y-2>"),vr=D('<div class="p-2 rounded bg-blue-200 shadow-lg">'),mr=D('<input type=text placeholder="New chapter title..."class="w-full p-2 border border-gray-300 rounded mb-2">'),xr=D('<div class="flex space-x-2"><button class="flex-grow bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">Add</button><button class="flex-grow bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded">Cancel'),wr=D('<div><h2 class="text-xl font-semibold mb-3 text-gray-700">Chapters</h2><div class=mt-4>'),$r=D('<button class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded transition-colors">New Chapter');const Sr=e=>{const t=ur(e.chapter.id),r=()=>e.chapter.id===P.selectedChapterId;return(()=>{var n=hr();n.$$click=()=>e.onSelect(e.chapter.id);var o=t.ref;return typeof o=="function"?qe(o,n):t.ref=n,n.style.setProperty("transition","transform 0.2s"),_(n,()=>e.chapter.title),V(s=>{var a={"bg-blue-100 border-l-4 border-blue-500 font-semibold text-blue-700":r(),"hover:bg-blue-100 text-gray-600":!r(),"opacity-25":t.isActiveDraggable},l=`translateY(${t.transform?.y||0}px)`;return s.e=Ut(n,a,s.e),l!==s.t&&((s.t=l)!=null?n.style.setProperty("transform",l):n.style.removeProperty("transform")),s},{e:void 0,t:void 0}),n})()},Cr=()=>{const[e,t]=R(!1),[r,n]=R(""),[o,{onDragEnd:s}]=z(),[a,l]=R([]);F(()=>{l(P.chapters.map(c=>c.id))});const i=async()=>{B("isLoading",!0);try{const c=await ce.getAllChapters();B("chapters",c),c.length>0&&!P.selectedChapterId&&d(c[0].id)}catch(c){B("error","Failed to load chapters."),console.error(c)}finally{B("isLoading",!1)}},d=async c=>{B("selectedChapterId",c),B("isLoading",!0);try{const p=await ce.getChapterById(c);B("selectedChapterContent",p.content)}catch(p){B("error","Failed to load chapter content."),console.error(p)}finally{B("isLoading",!1)}},f=async()=>{if(!r().trim()){alert("Chapter title cannot be empty.");return}try{await ce.createChapter(r()),n(""),t(!1),await i()}catch(c){alert("Failed to create chapter."),console.error(c)}};return he(i),s(({draggable:c,droppable:p})=>{if(c&&p){const h=a(),g=h.indexOf(c.id),y=h.indexOf(p.id);if(g!==y){const[v]=h.splice(g,1);h.splice(y,0,v);const C=h.map(A=>P.chapters.find(I=>I.id===A));B("chapters",C),l([...h]),ce.reorderChapters(h).catch(A=>{console.error("Failed to save order",A),alert("Failed to save new chapter order. Reverting."),i()})}}}),(()=>{var c=wr(),p=c.firstChild,h=p.nextSibling;return _(c,T(Z,{get when(){return P.isLoading&&P.chapters.length===0},get children(){return pr()}}),h),_(c,T(Z,{get when(){return P.error},get children(){var g=br();return _(g,()=>P.error),g}}),h),_(c,T(ir,{get ids(){return a()},get children(){var g=yr();return _(g,T(ft,{get each(){return P.chapters},children:y=>T(Sr,{chapter:y,onSelect:d})})),g}}),h),_(c,T(lr,{get children(){var g=vr();return _(g,()=>z()[0].active.draggable?.id),g}}),h),_(h,T(Z,{get when(){return e()},get fallback(){return(()=>{var g=$r();return g.$$click=()=>t(!0),g})()},get children(){return[(()=>{var g=mr();return g.$$input=y=>n(y.currentTarget.value),V(()=>g.value=r()),g})(),(()=>{var g=xr(),y=g.firstChild,v=y.nextSibling;return y.$$click=f,v.$$click=()=>t(!1),g})()]}})),c})()};Ve(["click","input"]);var Ar=D('<div class="flex flex-col h-full"><div class="p-2 border-b border-gray-300 bg-gray-50 mb-2 rounded-t-md flex items-center space-x-2"><span class="font-semibold text-gray-700 mr-2">Toolbar:</span><button class="px-2 py-1 text-sm font-bold hover:bg-gray-200 rounded">B</button><button class="px-2 py-1 text-sm italic hover:bg-gray-200 rounded">I</button><button class="px-2 py-1 text-sm font-semibold hover:bg-gray-200 rounded">H1</button><button class="px-2 py-1 text-sm font-semibold hover:bg-gray-200 rounded">H2</button><button class="px-2 py-1 text-sm font-semibold hover:bg-gray-200 rounded">Bullets</button><button class="px-2 py-1 text-sm font-semibold hover:bg-gray-200 rounded">Ordered</button></div><div class="flex-grow flex flex-col p-4 border border-gray-300 rounded-b-md bg-white"><h1 class="text-2xl font-bold mb-4 border-b pb-2"></h1><textarea class="flex-grow w-full p-2 border border-gray-200 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"placeholder="Start typing your markdown here..."></textarea></div><div class="mt-auto pt-2 flex justify-end"><button class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded disabled:bg-gray-400 disabled:cursor-not-allowed">'),Ir=D('<div class="flex items-center justify-center h-full text-gray-500">Select a chapter to start editing.');const Or=()=>{const[e,t]=R(""),[r,n]=R(!1);let o;const s=()=>P.chapters.find(i=>i.id===P.selectedChapterId);F(()=>{P.selectedChapterContent!==null?t(P.selectedChapterContent):t("")});const a=async()=>{const i=P.selectedChapterId;if(!i){alert("No chapter selected to save.");return}n(!0);try{await ce.updateChapter(i,{content:e()}),B("selectedChapterContent",e()),alert("Chapter saved successfully!")}catch(d){alert("Failed to save chapter."),console.error(d)}finally{n(!1)}},l=i=>{if(!o)return;const d=o.selectionStart,f=o.selectionEnd,c=o.value;if(i==="bold"||i==="italic"){const p=i==="bold"?"**":"*",h=c.substring(d,f),g=`${c.substring(0,d)}${p}${h}${p}${c.substring(f)}`;t(g),setTimeout(()=>{o?.focus();const y=f+p.length*2;o?.setSelectionRange(y,y)},0)}else if(i==="h1"||i==="h2"){const p=c.lastIndexOf(`
`,d-1)+1,h=c.indexOf(`
`,d),g=c.substring(p,h===-1?void 0:h),y=i==="h1"?"# ":"## ";if(g.startsWith(y)){const v=g.substring(y.length),C=`${c.substring(0,p)}${v}${c.substring(h===-1?c.length:h)}`;t(C)}else{const v=g.replace(/^(#+\s)/,""),C=`${c.substring(0,p)}${y}${v}${c.substring(h===-1?c.length:h)}`;t(C)}}else if(i==="bulletList"||i==="orderedList"){const p=c.lastIndexOf(`
`,d-1)+1;let h=c.indexOf(`
`,f);h===-1&&(h=c.length);const y=c.substring(p,h).split(`
`);let v=[];if(i==="bulletList")y.every(w=>/^\s*-\s/.test(w))?v=y.map(w=>w.replace(/^\s*-\s?/,"")):v=y.map(w=>w.trim()===""?"":`- ${w}`);else if(y.every(w=>/^\s*\d+\.\s/.test(w)))v=y.map(w=>w.replace(/^\s*\d+\.\s?/,""));else{let w=1;v=y.map(j=>j.trim()===""?"":`${w++}. ${j}`)}const C=v.join(`
`),A=`${c.substring(0,p)}${C}${c.substring(h)}`;t(A)}};return T(Z,{get when(){return P.selectedChapterId},get fallback(){return Ir()},get children(){var i=Ar(),d=i.firstChild,f=d.firstChild,c=f.nextSibling,p=c.nextSibling,h=p.nextSibling,g=h.nextSibling,y=g.nextSibling,v=y.nextSibling,C=d.nextSibling,A=C.firstChild,I=A.nextSibling,w=C.nextSibling,j=w.firstChild;c.$$click=()=>l("bold"),p.$$click=()=>l("italic"),h.$$click=()=>l("h1"),g.$$click=()=>l("h2"),y.$$click=()=>l("bulletList"),v.$$click=()=>l("orderedList"),_(A,()=>s()?.title||"Loading..."),I.$$input=ke=>t(ke.currentTarget.value);var te=o;return typeof te=="function"?qe(te,I):o=I,j.$$click=a,_(j,()=>r()?"Saving...":"Save Chapter"),V(()=>j.disabled=r()),V(()=>I.value=e()),i}})};Ve(["click","input"]);const[rt,Q]=Ie({ideas:[],isLoading:!1,error:null}),ae="/api",Le={async getIdeasForChapter(e){try{const t=await fetch(`${ae}/chapters/${e}/ideas`);if(!t.ok)throw new Error(`Failed to fetch ideas for chapter ${e}: ${t.statusText}`);return await t.json()}catch(t){throw console.error(`Error fetching ideas for chapter ${e}:`,t),t}},async createIdea(e,t){try{const r=await fetch(`${ae}/chapters/${e}/ideas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t})});if(!r.ok)throw new Error(`Failed to create idea for chapter ${e}: ${r.statusText}`);return await r.json()}catch(r){throw console.error(`Error creating idea for chapter ${e}:`,r),r}},async updateIdea(e,t,r){try{const n=await fetch(`${ae}/chapters/${e}/ideas/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw new Error(`Failed to update idea ${t}: ${n.statusText}`);return await n.json()}catch(n){throw console.error(`Error updating idea ${t}:`,n),n}},async deleteIdea(e,t){try{const r=await fetch(`${ae}/chapters/${e}/ideas/${t}`,{method:"DELETE"});if(!r.ok)throw new Error(`Failed to delete idea ${t}: ${r.statusText}`);return await r.json()}catch(r){throw console.error(`Error deleting idea ${t}:`,r),r}},async reorderIdeas(e,t){try{const r=await fetch(`${ae}/chapters/${e}/ideas/reorder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ideaOrder:t})});if(!r.ok)throw new Error(`Failed to reorder ideas: ${r.statusText}`);return await r.json()}catch(r){throw console.error("Error reordering ideas:",r),r}}};var _r=D("<p class=text-gray-500>Loading ideas..."),kr=D('<div><h2 class="text-xl font-semibold mb-3 text-gray-700">Ideas for "<!>"</h2><div class="space-y-2 mb-4"></div><textarea class="w-full p-2 border border-gray-300 rounded mb-2 h-24 focus:ring-2 focus:ring-blue-500 focus:border-transparent"placeholder="New idea..."></textarea><button class="w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-semibold py-2 px-4 rounded">Add Idea'),Er=D('<div class="flex items-center justify-center h-full text-gray-500">Select a chapter to see its ideas.'),Pr=D('<p class="text-sm text-gray-400">No ideas for this chapter yet.'),Tr=D('<div class="p-3 bg-yellow-100 border border-yellow-200 rounded-md shadow-sm"><p class="text-sm text-yellow-800"></p><div class="mt-1 text-right"><button class="text-xs text-yellow-600 hover:text-yellow-800 mr-1 disabled:text-gray-400"disabled>Edit</button><button class="text-xs text-red-500 hover:text-red-700">Del');const Dr=()=>{const[e,t]=R("");F(async()=>{const s=P.selectedChapterId;if(s){Q("isLoading",!0);try{const a=await Le.getIdeasForChapter(s);Q("ideas",a)}catch(a){Q("error","Failed to load ideas."),console.error(a)}finally{Q("isLoading",!1)}}else Q("ideas",[])});const r=()=>P.chapters.find(s=>s.id===P.selectedChapterId)?.title||"",n=async()=>{const s=P.selectedChapterId;if(!s){alert("No chapter selected to add an idea to.");return}if(!e().trim()){alert("Idea text cannot be empty.");return}try{const a=await Le.createIdea(s,e());Q("ideas",l=>[...l,a]),t("")}catch(a){alert("Failed to add idea."),console.error(a)}},o=async s=>{const a=P.selectedChapterId;if(!(!a||!confirm("Are you sure you want to delete this idea?")))try{await Le.deleteIdea(a,s),Q("ideas",l=>l.filter(i=>i.id!==s))}catch(l){alert("Failed to delete idea."),console.error(l)}};return T(Z,{get when(){return P.selectedChapterId},get fallback(){return Er()},get children(){var s=kr(),a=s.firstChild,l=a.firstChild,i=l.nextSibling;i.nextSibling;var d=a.nextSibling,f=d.nextSibling,c=f.nextSibling;return _(a,r,i),_(s,T(Z,{get when(){return rt.isLoading},get children(){return _r()}}),d),_(d,T(ft,{get each(){return rt.ideas},get fallback(){return Pr()},children:p=>(()=>{var h=Tr(),g=h.firstChild,y=g.nextSibling,v=y.firstChild,C=v.nextSibling;return _(g,()=>p.text),C.$$click=()=>o(p.id),h})()})),f.$$input=p=>t(p.currentTarget.value),c.$$click=n,V(()=>f.value=e()),s}})};Ve(["input","click"]);var jr=D('<div class="flex flex-col h-screen"><header class="bg-gray-800 text-white p-3 shadow-md z-10"><h1 class="text-xl font-semibold">TSWritter Clean</h1></header><div class="flex-grow overflow-hidden"> </div><footer class="p-2 bg-gray-700 text-white text-xs text-center"><p>WebSocket Status: ');const Nr=()=>{const[e,t]=R("Connecting to WebSocket...");return he(()=>{const r=new WebSocket("ws://localhost:3001/ws");r.onopen=()=>{console.log("WebSocket connection established"),t("Connected to WebSocket!"),r.send("Hello from SolidJS client!")},r.onmessage=n=>{console.log("WebSocket message received:",n.data),t(`Received from server: ${n.data}`)},r.onclose=()=>{console.log("WebSocket connection closed"),t("WebSocket disconnected. Attempting to reconnect...")},r.onerror=n=>{console.error("WebSocket error:",n),t("WebSocket error. See console for details.")},X(()=>{r.readyState===WebSocket.OPEN&&r.close()})}),T(nr,{get children(){var r=jr(),n=r.firstChild,o=n.nextSibling;o.firstChild;var s=o.nextSibling,a=s.firstChild;return a.firstChild,_(o,T(gr,{get chaptersPanel(){return T(Cr,{})},get editorPanel(){return T(Or,{})},get ideasPanel(){return T(Dr,{})}}),null),_(a,e,null),r}})},Lr=document.getElementById("root");Wt(()=>T(Nr,{}),Lr);
